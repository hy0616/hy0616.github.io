---
title: 磁盘分区形式转换
date: 2017-03-08 15:16:30
tags: [系统安装、磁盘管理]
categories: 系统安装
---

### 一、磁盘分区形式简介

在使用新磁盘之前，你必须对其进行分区。MBR（Master Boot Record）和GPT（GUID Partition Table）是在磁盘上存储分区信息的两种不同方式。这些分区信息包含了分区从哪里开始的信息，这样操作系统才知道哪个扇区是属于哪个分区的，以及哪个分区是可以启动的。在磁盘上创建分区时，你必须在MBR和GPT之间做出选择。

<!--more-->

+ MBR分区表，对应的是传统模式和UEFI的Legacy模式，2.1T以下的硬盘用，可以引导32bit和64bit的系统

 + MBR本身不是某一个分区，而是一块硬盘分配各个分区的一种模式。也可以认为，一块MBR磁盘上的所有分区都属于MBR分区。MBR磁盘可以被大多数新的老的操作系统识别，是传统上常用的一种模式，但一块硬盘上的主分区不能超过4个，最大容量不能超过2.1TB。

+ GPT分区表，对应的是UEFI模式，用于2.1T及其以上的硬盘。
 + GPT本身不是某一个分区，而是一块硬盘分配各个分区的一种模式。也可以认为，一块GPT磁盘上的所有分区都属于GPT分区。GPT磁盘存储数据更稳定，是一种先进的模式，主分区数量没有限制，容量也没有限制（最大可达18000TB）。只有在支持UEFI的BIOS的主板上，才能在GPT磁盘上安装64位操作系统。

 + 任何一块GPT磁盘上都有一个MSR分区，大小随硬盘总容量而定，一般不超过128MB。这个分区不能被用户直接使用，它的用途是防止将一块GPT磁盘接到老系统（如XP）中，被当作未格式化的空硬盘而继续操作（例如重新格式化），导致数据丢失。GPT磁盘上有了这个分区，当把它接入XP等老系统中，会提示无法识别的磁盘，也无法进一步操作。

 + GPT磁盘只有做系统盘的时候才会有EFI分区，这个分区是操作系统的引导分区，与在MBR磁盘上安装生成的那个100MB隐藏分区用途相同。

### 二、GPT磁盘转换MBR磁盘

有时候用原版系统镜像安装windows系统时，会提示“windows无法安装到这个磁盘。选中的磁盘采用GPT分区形式”，导致安装失败。

**操作步骤**

1. 在系统提示无法安装的那一步，按住“shift+f10”，呼出“cmd”命令符。
2. 输入：diskpart，回车，进入diskpart。
3. 输入：list disk，回车，显示磁盘信息。
4. 输入：select disk 0，回车，选择第0个磁盘（电脑的硬盘编号是从0开始的）。
5. 输入：clean，回车，删除磁盘分区&格式化。
6. 输入：convert mbr，回车，将当前磁盘分区设置为Mbr形式。
7. 输入：create partition primary size = xxx，回车，创建主分区大小（MB）。
8. 输入：format fs=ntfs quick，回车，格式化磁盘为ntfs。
9. 输入：exit，回车，退出diskpart，输入：exit，回车，退出cmd。

### 三、MBR磁盘转换GPT磁盘

有时候用原版系统镜像安装windows系统时，会提示“windows无法安装到这个磁盘。选中的磁盘采用MBR分区形式”，导致安装失败。

**操作步骤**

1. 在系统提示无法安装的那一步，按住“shift+f10”，呼出“cmd”命令符。
2. 输入：diskpart，回车，进入diskpart。
3. 输入：list disk，回车，显示磁盘信息。
4. 输入：select disk 0，回车，选择第0个磁盘（电脑的硬盘编号是从0开始的）。
5. 输入：clean，回车，删除磁盘分区&格式化。
6. 输入：convert gpt，回车，将当前磁盘分区设置为GPT形式。
7. 输入：create partition efi size=100，回车，创建EFI分区，大小为100。
8. 输入：create partition msr size=128，回车，创建MSR分区，微软默认大小是128M。
9. 输入：create partition primary size=×××，创建主分区，这里要注意数字按M计算。
10. 输入：list partition，回车，列出磁盘上的分区。
11. 输入：exit，回车，退出diskpart，输入：exit，回车，退出cmd。


温馨提示：

diskpart命令的详细内容，可以利用键入help命令查看。

